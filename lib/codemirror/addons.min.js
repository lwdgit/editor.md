/*! Editor.md v1.5.0 | /Users/lw/workspace/github/editor.md/lib/codemirror/addons.min.js | Open source online markdown editor. | MIT License | By: Pandao | https://github.com/pandao/editor.md | 2016-05-02 */
!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){e.defineOption("showTrailingSpace",!1,function(t,i,r){r==e.Init&&(r=!1),r&&!i?t.removeOverlay("trailingspace"):!r&&i&&t.addOverlay({token:function(e){for(var t=e.string.length,i=t;i&&/\s/.test(e.string.charAt(i-1));--i);return i>e.pos?(e.pos=i,null):(e.pos=t,"trailingspace")},name:"trailingspace"})})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(e,t,i){var r,n=e.getWrapperElement();return r=n.appendChild(document.createElement("div")),i?r.className="CodeMirror-dialog CodeMirror-dialog-bottom":r.className="CodeMirror-dialog CodeMirror-dialog-top","string"==typeof t?r.innerHTML=t:r.appendChild(t),r}function i(e,t){e.state.currentNotificationClose&&e.state.currentNotificationClose(),e.state.currentNotificationClose=t}e.defineExtension("openDialog",function(r,n,o){function a(e){if("string"==typeof e)h.value=e;else{if(c)return;c=!0,l.parentNode.removeChild(l),u.focus(),o.onClose&&o.onClose(l)}}o||(o={}),i(this,null);var s,l=t(this,r,o.bottom),c=!1,u=this,h=l.getElementsByTagName("input")[0];return h?(o.value&&(h.value=o.value,h.select()),o.onInput&&e.on(h,"input",function(e){o.onInput(e,h.value,a)}),o.onKeyUp&&e.on(h,"keyup",function(e){o.onKeyUp(e,h.value,a)}),e.on(h,"keydown",function(t){o&&o.onKeyDown&&o.onKeyDown(t,h.value,a)||((27==t.keyCode||o.closeOnEnter!==!1&&13==t.keyCode)&&(h.blur(),e.e_stop(t),a()),13==t.keyCode&&n(h.value,t))}),o.closeOnBlur!==!1&&e.on(h,"blur",a),h.focus()):(s=l.getElementsByTagName("button")[0])&&(e.on(s,"click",function(){a(),u.focus()}),o.closeOnBlur!==!1&&e.on(s,"blur",a),s.focus()),a}),e.defineExtension("openConfirm",function(r,n,o){function a(){c||(c=!0,s.parentNode.removeChild(s),u.focus())}i(this,null);var s=t(this,r,o&&o.bottom),l=s.getElementsByTagName("button"),c=!1,u=this,h=1;l[0].focus();for(var d=0;d<l.length;++d){var f=l[d];!function(t){e.on(f,"click",function(i){e.e_preventDefault(i),a(),t&&t(u)})}(n[d]),e.on(f,"blur",function(){--h,setTimeout(function(){0>=h&&a()},200)}),e.on(f,"focus",function(){++h})}}),e.defineExtension("openNotification",function(r,n){function o(){l||(l=!0,clearTimeout(a),s.parentNode.removeChild(s))}i(this,o);var a,s=t(this,r,n&&n.bottom),l=!1,c=n&&"undefined"!=typeof n.duration?n.duration:5e3;return e.on(s,"click",function(t){e.e_preventDefault(t),o()}),c&&(a=setTimeout(o,c)),o})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t,n,o){if(this.atOccurrence=!1,this.doc=e,null==o&&"string"==typeof t&&(o=!1),n=n?e.clipPos(n):r(0,0),this.pos={from:n,to:n},"string"!=typeof t)t.global||(t=new RegExp(t.source,t.ignoreCase?"ig":"g")),this.matches=function(i,n){if(i){t.lastIndex=0;for(var o,a,s=e.getLine(n.line).slice(0,n.ch),l=0;;){t.lastIndex=l;var c=t.exec(s);if(!c)break;if(o=c,a=o.index,l=o.index+(o[0].length||1),l==s.length)break}var u=o&&o[0].length||0;u||(0==a&&0==s.length?o=void 0:a!=e.getLine(n.line).length&&u++)}else{t.lastIndex=n.ch;var s=e.getLine(n.line),o=t.exec(s),u=o&&o[0].length||0,a=o&&o.index;a+u==s.length||u||(u=1)}return o&&u?{from:r(n.line,a),to:r(n.line,a+u),match:o}:void 0};else{var a=t;o&&(t=t.toLowerCase());var s=o?function(e){return e.toLowerCase()}:function(e){return e},l=t.split("\n");if(1==l.length)t.length?this.matches=function(n,o){if(n){var l=e.getLine(o.line).slice(0,o.ch),c=s(l),u=c.lastIndexOf(t);if(u>-1)return u=i(l,c,u),{from:r(o.line,u),to:r(o.line,u+a.length)}}else{var l=e.getLine(o.line).slice(o.ch),c=s(l),u=c.indexOf(t);if(u>-1)return u=i(l,c,u)+o.ch,{from:r(o.line,u),to:r(o.line,u+a.length)}}}:this.matches=function(){};else{var c=a.split("\n");this.matches=function(t,i){var n=l.length-1;if(t){if(i.line-(l.length-1)<e.firstLine())return;if(s(e.getLine(i.line).slice(0,c[n].length))!=l[l.length-1])return;for(var o=r(i.line,c[n].length),a=i.line-1,u=n-1;u>=1;--u,--a)if(l[u]!=s(e.getLine(a)))return;var h=e.getLine(a),d=h.length-c[0].length;if(s(h.slice(d))!=l[0])return;return{from:r(a,d),to:o}}if(!(i.line+(l.length-1)>e.lastLine())){var h=e.getLine(i.line),d=h.length-c[0].length;if(s(h.slice(d))==l[0]){for(var f=r(i.line,d),a=i.line+1,u=1;n>u;++u,++a)if(l[u]!=s(e.getLine(a)))return;if(s(e.getLine(a).slice(0,c[n].length))==l[n])return{from:f,to:r(a,c[n].length)}}}}}}}function i(e,t,i){if(e.length==t.length)return i;for(var r=Math.min(i,e.length);;){var n=e.slice(0,r).toLowerCase().length;if(i>n)++r;else{if(!(n>i))return r;--r}}}var r=e.Pos;t.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(e){function t(e){var t=r(e,0);return i.pos={from:t,to:t},i.atOccurrence=!1,!1}for(var i=this,n=this.doc.clipPos(e?this.pos.from:this.pos.to);;){if(this.pos=this.matches(e,n))return this.atOccurrence=!0,this.pos.match||!0;if(e){if(!n.line)return t(0);n=r(n.line-1,this.doc.getLine(n.line-1).length)}else{var o=this.doc.lineCount();if(n.line==o-1)return t(o);n=r(n.line+1,0)}}},from:function(){return this.atOccurrence?this.pos.from:void 0},to:function(){return this.atOccurrence?this.pos.to:void 0},replace:function(t){if(this.atOccurrence){var i=e.splitLines(t);this.doc.replaceRange(i,this.pos.from,this.pos.to),this.pos.to=r(this.pos.from.line+i.length-1,i[i.length-1].length+(1==i.length?this.pos.from.ch:0))}}},e.defineExtension("getSearchCursor",function(e,i,r){return new t(this.doc,e,i,r)}),e.defineDocExtension("getSearchCursor",function(e,i,r){return new t(this,e,i,r)}),e.defineExtension("selectMatches",function(t,i){for(var r,n=[],o=this.getSearchCursor(t,this.getCursor("from"),i);(r=o.findNext())&&!(e.cmpPos(o.to(),this.getCursor("to"))>0);)n.push({anchor:o.from(),head:o.to()});n.length&&this.setSelections(n,0)})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("./searchcursor"),require("../dialog/dialog")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./searchcursor","../dialog/dialog"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t){return"string"==typeof e?e=new RegExp(e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),t?"gi":"g"):e.global||(e=new RegExp(e.source,e.ignoreCase?"gi":"g")),{token:function(t){e.lastIndex=t.pos;var i=e.exec(t.string);return i&&i.index==t.pos?(t.pos+=i[0].length,"searching"):void(i?t.pos=i.index:t.skipToEnd())}}}function i(){this.posFrom=this.posTo=this.query=null,this.overlay=null}function r(e){return e.state.search||(e.state.search=new i)}function n(e){return"string"==typeof e&&e==e.toLowerCase()}function o(e,t,i){return e.getSearchCursor(t,i,n(t))}function a(e,t,i,r,n){e.openDialog?e.openDialog(t,n,{value:r}):n(prompt(i,r))}function s(e,t,i,r){e.openConfirm?e.openConfirm(t,r):confirm(i)&&r[0]()}function l(e){var t=e.match(/^\/(.*)\/([a-z]*)$/);if(t)try{e=new RegExp(t[1],-1==t[2].indexOf("i")?"":"i")}catch(i){}return("string"==typeof e?""==e:e.test(""))&&(e=/x^/),e}function c(e,i){var o=r(e);return o.query?u(e,i):void a(e,f,"Search for:",e.getSelection(),function(r){e.operation(function(){r&&!o.query&&(o.query=l(r),e.removeOverlay(o.overlay,n(o.query)),o.overlay=t(o.query,n(o.query)),e.addOverlay(o.overlay),e.showMatchesOnScrollbar&&(o.annotate&&(o.annotate.clear(),o.annotate=null),o.annotate=e.showMatchesOnScrollbar(o.query,n(o.query))),o.posFrom=o.posTo=e.getCursor(),u(e,i))})})}function u(t,i){t.operation(function(){var n=r(t),a=o(t,n.query,i?n.posFrom:n.posTo);(a.find(i)||(a=o(t,n.query,i?e.Pos(t.lastLine()):e.Pos(t.firstLine(),0)),a.find(i)))&&(t.setSelection(a.from(),a.to()),t.scrollIntoView({from:a.from(),to:a.to()}),n.posFrom=a.from(),n.posTo=a.to())})}function h(e){e.operation(function(){var t=r(e);t.query&&(t.query=null,e.removeOverlay(t.overlay),t.annotate&&(t.annotate.clear(),t.annotate=null))})}function d(e,t){e.getOption("readOnly")||a(e,p,"Replace:",e.getSelection(),function(i){i&&(i=l(i),a(e,g,"Replace with:","",function(r){if(t)e.operation(function(){for(var t=o(e,i);t.findNext();)if("string"!=typeof i){var n=e.getRange(t.from(),t.to()).match(i);t.replace(r.replace(/\$(\d)/g,function(e,t){return n[t]}))}else t.replace(r)});else{h(e);var n=o(e,i,e.getCursor()),a=function(){var t,r=n.from();!(t=n.findNext())&&(n=o(e,i),!(t=n.findNext())||r&&n.from().line==r.line&&n.from().ch==r.ch)||(e.setSelection(n.from(),n.to()),e.scrollIntoView({from:n.from(),to:n.to()}),s(e,m,"Replace?",[function(){l(t)},a]))},l=function(e){n.replace("string"==typeof i?r:r.replace(/\$(\d)/g,function(t,i){return e[i]})),a()};a()}}))})}var f='Search: <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use /re/ syntax for regexp search)</span>',p='Replace: <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use /re/ syntax for regexp search)</span>',g='With: <input type="text" style="width: 10em" class="CodeMirror-search-field"/>',m="Replace? <button>Yes</button> <button>No</button> <button>Stop</button>";e.commands.find=function(e){h(e),c(e)},e.commands.findNext=c,e.commands.findPrev=function(e){c(e,!0)},e.commands.clearSearch=h,e.commands.replace=d,e.commands.replaceAll=function(e){d(e,!0)}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t){function i(e){clearTimeout(r.doRedraw),r.doRedraw=setTimeout(function(){r.redraw()},e)}this.cm=e,this.options=t,this.buttonHeight=t.scrollButtonHeight||e.getOption("scrollButtonHeight"),this.annotations=[],this.doRedraw=this.doUpdate=null,this.div=e.getWrapperElement().appendChild(document.createElement("div")),this.div.style.cssText="position: absolute; right: 0; top: 0; z-index: 7; pointer-events: none",this.computeScale();var r=this;e.on("refresh",this.resizeHandler=function(){clearTimeout(r.doUpdate),r.doUpdate=setTimeout(function(){r.computeScale()&&i(20)},100)}),e.on("markerAdded",this.resizeHandler),e.on("markerCleared",this.resizeHandler),t.listenForChanges!==!1&&e.on("change",this.changeHandler=function(){i(250)})}e.defineExtension("annotateScrollbar",function(e){return"string"==typeof e&&(e={className:e}),new t(this,e)}),e.defineOption("scrollButtonHeight",0),t.prototype.computeScale=function(){var e=this.cm,t=(e.getWrapperElement().clientHeight-e.display.barHeight-2*this.buttonHeight)/e.heightAtLine(e.lastLine()+1,"local");return t!=this.hScale?(this.hScale=t,!0):void 0},t.prototype.update=function(e){this.annotations=e,this.redraw()},t.prototype.redraw=function(e){e!==!1&&this.computeScale();var t=this.cm,i=this.hScale,r=document.createDocumentFragment(),n=this.annotations;if(t.display.barWidth)for(var o,a=0;a<n.length;a++){for(var s=n[a],l=o||t.charCoords(s.from,"local").top*i,c=t.charCoords(s.to,"local").bottom*i;a<n.length-1&&(o=t.charCoords(n[a+1].from,"local").top*i,!(o>c+.9));)s=n[++a],c=t.charCoords(s.to,"local").bottom*i;if(c!=l){var u=Math.max(c-l,3),h=r.appendChild(document.createElement("div"));h.style.cssText="position: absolute; right: 0px; width: "+Math.max(t.display.barWidth-1,2)+"px; top: "+(l+this.buttonHeight)+"px; height: "+u+"px",h.className=this.options.className}}this.div.textContent="",this.div.appendChild(r)},t.prototype.clear=function(){this.cm.off("refresh",this.resizeHandler),this.cm.off("markerAdded",this.resizeHandler),this.cm.off("markerCleared",this.resizeHandler),this.changeHandler&&this.cm.off("change",this.changeHandler),this.div.parentNode.removeChild(this.div)}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("./searchcursor"),require("../scroll/annotatescrollbar")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./searchcursor","../scroll/annotatescrollbar"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t,i,r){this.cm=e;var n={listenForChanges:!1};for(var o in r)n[o]=r[o];n.className||(n.className="CodeMirror-search-match"),this.annotation=e.annotateScrollbar(n),this.query=t,this.caseFold=i,this.gap={from:e.firstLine(),to:e.lastLine()+1},this.matches=[],this.update=null,this.findMatches(),this.annotation.update(this.matches);var a=this;e.on("change",this.changeHandler=function(e,t){a.onChange(t)})}function i(e,t,i){return t>=e?e:Math.max(t,e+i)}e.defineExtension("showMatchesOnScrollbar",function(e,i,r){return"string"==typeof r&&(r={className:r}),r||(r={}),new t(this,e,i,r)});var r=1e3;t.prototype.findMatches=function(){if(this.gap){for(var t=0;t<this.matches.length;t++){var i=this.matches[t];if(i.from.line>=this.gap.to)break;i.to.line>=this.gap.from&&this.matches.splice(t--,1)}for(var n=this.cm.getSearchCursor(this.query,e.Pos(this.gap.from,0),this.caseFold);n.findNext();){var i={from:n.from(),to:n.to()};if(i.from.line>=this.gap.to)break;if(this.matches.splice(t++,0,i),this.matches.length>r)break}this.gap=null}},t.prototype.onChange=function(t){var r=t.from.line,n=e.changeEnd(t).line,o=n-t.to.line;if(this.gap?(this.gap.from=Math.min(i(this.gap.from,r,o),t.from.line),this.gap.to=Math.max(i(this.gap.to,r,o),t.from.line)):this.gap={from:t.from.line,to:n+1},o)for(var a=0;a<this.matches.length;a++){var s=this.matches[a],l=i(s.from.line,r,o);l!=s.from.line&&(s.from=e.Pos(l,s.from.ch));var c=i(s.to.line,r,o);c!=s.to.line&&(s.to=e.Pos(c,s.to.ch))}clearTimeout(this.update);var u=this;this.update=setTimeout(function(){u.updateAfterChange()},250)},t.prototype.updateAfterChange=function(){this.findMatches(),this.annotation.update(this.matches)},t.prototype.clear=function(){this.cm.off("change",this.changeHandler),this.annotation.clear()}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(e){e.state.placeholder&&(e.state.placeholder.parentNode.removeChild(e.state.placeholder),e.state.placeholder=null)}function i(e){t(e);var i=e.state.placeholder=document.createElement("pre");i.style.cssText="height: 0; overflow: visible",i.className="CodeMirror-placeholder",i.appendChild(document.createTextNode(e.getOption("placeholder"))),e.display.lineSpace.insertBefore(i,e.display.lineSpace.firstChild)}function r(e){o(e)&&i(e)}function n(e){var r=e.getWrapperElement(),n=o(e);r.className=r.className.replace(" CodeMirror-empty","")+(n?" CodeMirror-empty":""),n?i(e):t(e)}function o(e){return 1===e.lineCount()&&""===e.getLine(0)}e.defineOption("placeholder","",function(i,o,a){var s=a&&a!=e.Init;if(o&&!s)i.on("blur",r),i.on("change",n),n(i);else if(!o&&s){i.off("blur",r),i.off("change",n),t(i);var l=i.getWrapperElement();l.className=l.className.replace(" CodeMirror-empty","")}o&&!i.hasFocus()&&r(i)})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("../fold/xml-fold")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../fold/xml-fold"],e):e(CodeMirror)}(function(e){function t(t){if(t.getOption("disableInput"))return e.Pass;for(var i=t.listSelections(),r=[],l=0;l<i.length;l++){if(!i[l].empty())return e.Pass;var c=i[l].head,u=t.getTokenAt(c),h=e.innerMode(t.getMode(),u.state),d=h.state;if("xml"!=h.mode.name||!d.tagName)return e.Pass;var f=t.getOption("autoCloseTags"),p="html"==h.mode.configuration,g="object"==typeof f&&f.dontCloseTags||p&&a,m="object"==typeof f&&f.indentTags||p&&s,v=d.tagName;u.end>c.ch&&(v=v.slice(0,v.length-u.end+c.ch));var y=v.toLowerCase();if(!v||"string"==u.type&&(u.end!=c.ch||!/[\"\']/.test(u.string.charAt(u.string.length-1))||1==u.string.length)||"tag"==u.type&&"closeTag"==d.type||u.string.indexOf("/")==u.string.length-1||g&&n(g,y)>-1||o(t,v,c,d,!0))return e.Pass;var w=m&&n(m,y)>-1;r[l]={indent:w,text:">"+(w?"\n\n":"")+"</"+v+">",newPos:w?e.Pos(c.line+1,0):e.Pos(c.line,c.ch+1)}}for(var l=i.length-1;l>=0;l--){var b=r[l];t.replaceRange(b.text,i[l].head,i[l].anchor,"+insert");var x=t.listSelections().slice(0);x[l]={head:b.newPos,anchor:b.newPos},t.setSelections(x),b.indent&&(t.indentLine(b.newPos.line,null,!0),t.indentLine(b.newPos.line+1,null,!0))}}function i(t,i){for(var r=t.listSelections(),n=[],a=i?"/":"</",s=0;s<r.length;s++){if(!r[s].empty())return e.Pass;var l=r[s].head,c=t.getTokenAt(l),u=e.innerMode(t.getMode(),c.state),h=u.state;if(i&&("string"==c.type||"<"!=c.string.charAt(0)||c.start!=l.ch-1))return e.Pass;if("xml"!=u.mode.name)if("htmlmixed"==t.getMode().name&&"javascript"==u.mode.name)n[s]=a+"script>";else{if("htmlmixed"!=t.getMode().name||"css"!=u.mode.name)return e.Pass;n[s]=a+"style>"}else{if(!h.context||!h.context.tagName||o(t,h.context.tagName,l,h))return e.Pass;n[s]=a+h.context.tagName+">"}}t.replaceSelections(n),r=t.listSelections();for(var s=0;s<r.length;s++)(s==r.length-1||r[s].head.line<r[s+1].head.line)&&t.indentLine(r[s].head.line)}function r(t){return t.getOption("disableInput")?e.Pass:i(t,!0)}function n(e,t){if(e.indexOf)return e.indexOf(t);for(var i=0,r=e.length;r>i;++i)if(e[i]==t)return i;return-1}function o(t,i,r,n,o){if(!e.scanForClosingTag)return!1;var a=Math.min(t.lastLine()+1,r.line+500),s=e.scanForClosingTag(t,r,null,a);if(!s||s.tag!=i)return!1;for(var l=n.context,c=o?1:0;l&&l.tagName==i;l=l.prev)++c;r=s.to;for(var u=1;c>u;u++){var h=e.scanForClosingTag(t,r,null,a);if(!h||h.tag!=i)return!1;r=h.to}return!0}e.defineOption("autoCloseTags",!1,function(i,n,o){if(o!=e.Init&&o&&i.removeKeyMap("autoCloseTags"),n){var a={name:"autoCloseTags"};("object"!=typeof n||n.whenClosing)&&(a["'/'"]=function(e){return r(e)}),("object"!=typeof n||n.whenOpening)&&(a["'>'"]=function(e){return t(e)}),i.addKeyMap(a)}});var a=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],s=["applet","blockquote","body","button","div","dl","fieldset","form","frameset","h1","h2","h3","h4","h5","h6","head","html","iframe","layer","legend","object","ol","p","select","table","ul"];e.commands.closeTag=function(e){return i(e)}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(t,n,o,a){function s(e){var i=l(t,n);if(!i||i.to.line-i.from.line<c)return null;for(var r=t.findMarksAt(i.from),o=0;o<r.length;++o)if(r[o].__isFold&&"fold"!==a){if(!e)return null;i.cleared=!0,r[o].clear()}return i}if(o&&o.call){var l=o;o=null}else var l=r(t,o,"rangeFinder");"number"==typeof n&&(n=e.Pos(n,0));var c=r(t,o,"minFoldSize"),u=s(!0);if(r(t,o,"scanUp"))for(;!u&&n.line>t.firstLine();)n=e.Pos(n.line-1,0),u=s(!1);if(u&&!u.cleared&&"unfold"!==a){var h=i(t,o);e.on(h,"mousedown",function(t){d.clear(),e.e_preventDefault(t)});var d=t.markText(u.from,u.to,{replacedWith:h,clearOnEnter:!0,__isFold:!0});d.on("clear",function(i,r){e.signal(t,"unfold",t,i,r)}),e.signal(t,"fold",t,u.from,u.to)}}function i(e,t){var i=r(e,t,"widget");if("string"==typeof i){var n=document.createTextNode(i);i=document.createElement("span"),i.appendChild(n),i.className="CodeMirror-foldmarker"}return i}function r(e,t,i){if(t&&void 0!==t[i])return t[i];var r=e.options.foldOptions;return r&&void 0!==r[i]?r[i]:n[i]}e.newFoldFunction=function(e,i){return function(r,n){t(r,n,{rangeFinder:e,widget:i})}},e.defineExtension("foldCode",function(e,i,r){t(this,e,i,r)}),e.defineExtension("isFolded",function(e){for(var t=this.findMarksAt(e),i=0;i<t.length;++i)if(t[i].__isFold)return!0}),e.commands.toggleFold=function(e){e.foldCode(e.getCursor())},e.commands.fold=function(e){e.foldCode(e.getCursor(),null,"fold")},e.commands.unfold=function(e){e.foldCode(e.getCursor(),null,"unfold")},e.commands.foldAll=function(t){t.operation(function(){for(var i=t.firstLine(),r=t.lastLine();r>=i;i++)t.foldCode(e.Pos(i,0),null,"fold")})},e.commands.unfoldAll=function(t){t.operation(function(){for(var i=t.firstLine(),r=t.lastLine();r>=i;i++)t.foldCode(e.Pos(i,0),null,"unfold")})},e.registerHelper("fold","combine",function(){var e=Array.prototype.slice.call(arguments,0);return function(t,i){for(var r=0;r<e.length;++r){var n=e[r](t,i);if(n)return n}}}),e.registerHelper("fold","auto",function(e,t){for(var i=e.getHelpers(t,"fold"),r=0;r<i.length;r++){var n=i[r](e,t);if(n)return n}});var n={rangeFinder:e.fold.auto,widget:"↔",minFoldSize:0,scanUp:!1};e.defineOption("foldOptions",null),e.defineExtension("foldOption",function(e,t){return r(this,e,t)})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("./foldcode")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./foldcode"],e):e(CodeMirror)}(function(e){"use strict";function t(e){this.options=e,this.from=this.to=0}function i(e){return e===!0&&(e={}),null==e.gutter&&(e.gutter="CodeMirror-foldgutter"),null==e.indicatorOpen&&(e.indicatorOpen="CodeMirror-foldgutter-open"),null==e.indicatorFolded&&(e.indicatorFolded="CodeMirror-foldgutter-folded"),e}function r(e,t){for(var i=e.findMarksAt(h(t)),r=0;r<i.length;++r)if(i[r].__isFold&&i[r].find().from.line==t)return!0}function n(e){if("string"==typeof e){var t=document.createElement("div");return t.className=e+" CodeMirror-guttermarker-subtle",t}return e.cloneNode(!0)}function o(e,t,i){var o=e.state.foldGutter.options,a=t,s=e.foldOption(o,"minFoldSize"),l=e.foldOption(o,"rangeFinder");e.eachLine(t,i,function(t){var i=null;if(r(e,a))i=n(o.indicatorFolded);else{var c=h(a,0),u=l&&l(e,c);u&&u.to.line-u.from.line>=s&&(i=n(o.indicatorOpen))}e.setGutterMarker(t,o.gutter,i),++a})}function a(e){var t=e.getViewport(),i=e.state.foldGutter;i&&(e.operation(function(){o(e,t.from,t.to)}),i.from=t.from,i.to=t.to)}function s(e,t,i){var r=e.state.foldGutter;if(r){var n=r.options;i==n.gutter&&e.foldCode(h(t,0),n.rangeFinder)}}function l(e){var t=e.state.foldGutter;if(t){var i=t.options;t.from=t.to=0,clearTimeout(t.changeUpdate),t.changeUpdate=setTimeout(function(){a(e)},i.foldOnChangeTimeSpan||600)}}function c(e){var t=e.state.foldGutter;if(t){var i=t.options;clearTimeout(t.changeUpdate),t.changeUpdate=setTimeout(function(){var i=e.getViewport();t.from==t.to||i.from-t.to>20||t.from-i.to>20?a(e):e.operation(function(){i.from<t.from&&(o(e,i.from,t.from),t.from=i.from),i.to>t.to&&(o(e,t.to,i.to),t.to=i.to)})},i.updateViewportTimeSpan||400)}}function u(e,t){var i=e.state.foldGutter;if(i){var r=t.line;r>=i.from&&r<i.to&&o(e,r,r+1)}}e.defineOption("foldGutter",!1,function(r,n,o){o&&o!=e.Init&&(r.clearGutter(r.state.foldGutter.options.gutter),r.state.foldGutter=null,r.off("gutterClick",s),r.off("change",l),r.off("viewportChange",c),r.off("fold",u),r.off("unfold",u),r.off("swapDoc",a)),n&&(r.state.foldGutter=new t(i(n)),a(r),r.on("gutterClick",s),r.on("change",l),r.on("viewportChange",c),r.on("fold",u),r.on("unfold",u),r.on("swapDoc",a))});var h=e.Pos}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("./foldcode")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./foldcode"],e):e(CodeMirror)}(function(e){"use strict";function t(e){this.options=e,this.from=this.to=0}function i(e){return e===!0&&(e={}),null==e.gutter&&(e.gutter="CodeMirror-foldgutter"),null==e.indicatorOpen&&(e.indicatorOpen="CodeMirror-foldgutter-open"),null==e.indicatorFolded&&(e.indicatorFolded="CodeMirror-foldgutter-folded"),e}function r(e,t){for(var i=e.findMarksAt(h(t)),r=0;r<i.length;++r)if(i[r].__isFold&&i[r].find().from.line==t)return!0}function n(e){if("string"==typeof e){var t=document.createElement("div");return t.className=e+" CodeMirror-guttermarker-subtle",t}return e.cloneNode(!0)}function o(e,t,i){var o=e.state.foldImg.options,a=t,s=e.foldOption(o,"minFoldSize"),l=e.foldOption(o,"rangeFinder");e.eachLine(t,i,function(t){var i=null;if(r(e,a))i=n(o.indicatorFolded);else{var c=h(a,0),u=l&&l(e,c);u&&u.to.line-u.from.line>=s&&(i=n(o.indicatorOpen))}e.setGutterMarker(t,o.gutter,i),++a})}function a(e){var t=e.getViewport(),i=e.state.foldImg;i&&(e.operation(function(){o(e,t.from,t.to)}),i.from=t.from,i.to=t.to)}function s(e,t,i){var r=e.state.foldImg;if(r){var n=r.options;i==n.gutter&&e.foldCode(h(t,0),n)}}function l(e){var t=e.state.foldImg;if(t){var i=t.options;t.from=t.to=0,clearTimeout(t.changeUpdate),t.changeUpdate=setTimeout(function(){a(e)},i.foldOnChangeTimeSpan||600),e.execCommand("foldImg")}}function c(e){var t=e.state.foldImg;if(t){var i=t.options;clearTimeout(t.changeUpdate),t.changeUpdate=setTimeout(function(){var i=e.getViewport();t.from==t.to||i.from-t.to>20||t.from-i.to>20?a(e):e.operation(function(){i.from<t.from&&(o(e,i.from,t.from),t.from=i.from),i.to>t.to&&(o(e,t.to,i.to),t.to=i.to)})},i.updateViewportTimeSpan||400)}}function u(e,t){var i=e.state.foldImg;if(i){var r=t.line;r>=i.from&&r<i.to&&o(e,r,r+1)}}e.defineOption("foldImg",!1,function(r,n,o){o&&o!=e.Init&&(r.clearGutter(r.state.foldImg.options.gutter),r.state.foldImg=null,r.off("gutterClick",s),r.off("change",l),r.off("viewportChange",c),r.off("fold",u),r.off("unfold",u),r.off("swapDoc",a)),n&&(r.state.foldImg=new t(i(n)),a(r),r.on("gutterClick",s),r.on("change",l),r.on("viewportChange",c),r.on("fold",u),r.on("unfold",u),r.on("swapDoc",a))});var h=e.Pos;e.commands.foldImg=function(t){t.operation(function(){for(var i=t.firstLine(),r=t.lastLine();r>=i;i++)t.foldCode(e.Pos(i,0),t.state.foldImg.options,"fold")})}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.registerHelper("fold","indent",function(t,i){var r=t.getOption("tabSize"),n=t.getLine(i.line);if(/\S/.test(n)){for(var o=function(t){return e.countColumn(t,null,r)},a=o(n),s=null,l=i.line+1,c=t.lastLine();c>=l;++l){var u=t.getLine(l),h=o(u);if(h>a)s=l;else if(/\S/.test(u))break}return s?{from:e.Pos(i.line,n.length),to:e.Pos(s,t.getLine(s).length)}:void 0}})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.registerHelper("fold","brace",function(t,i){function r(r){for(var n=i.ch,l=0;;){var c=0>=n?-1:s.lastIndexOf(r,n-1);if(-1!=c){if(1==l&&c<i.ch)break;if(o=t.getTokenTypeAt(e.Pos(a,c+1)),!/^(comment|string)/.test(o))return c+1;n=c-1}else{if(1==l)break;l=1,n=s.length}}}var n,o,a=i.line,s=t.getLine(a),l="{",c="}",n=r("{");if(null==n&&(l="[",c="]",n=r("[")),null!=n){var u,h,d=1,f=t.lastLine();e:for(var p=a;f>=p;++p)for(var g=t.getLine(p),m=p==a?n:0;;){var v=g.indexOf(l,m),y=g.indexOf(c,m);if(0>v&&(v=g.length),0>y&&(y=g.length),m=Math.min(v,y),m==g.length)break;if(t.getTokenTypeAt(e.Pos(p,m+1))==o)if(m==v)++d;else if(!--d){u=p,h=m;break e}++m}if(null!=u&&(a!=u||h!=n))return{from:e.Pos(a,n),to:e.Pos(u,h)}}}),e.registerHelper("fold","import",function(t,i){function r(i){if(i<t.firstLine()||i>t.lastLine())return null;var r=t.getTokenAt(e.Pos(i,1));if(/\S/.test(r.string)||(r=t.getTokenAt(e.Pos(i,r.end+1))),"keyword"!=r.type||"import"!=r.string)return null;for(var n=i,o=Math.min(t.lastLine(),i+10);o>=n;++n){var a=t.getLine(n),s=a.indexOf(";");if(-1!=s)return{startCh:r.end,end:e.Pos(n,s)}}}var n,i=i.line,o=r(i);if(!o||r(i-1)||(n=r(i-2))&&n.end.line==i-1)return null;for(var a=o.end;;){var s=r(a.line+1);if(null==s)break;a=s.end}return{from:t.clipPos(e.Pos(i,o.startCh+1)),to:a}}),e.registerHelper("fold","include",function(t,i){function r(i){if(i<t.firstLine()||i>t.lastLine())return null;var r=t.getTokenAt(e.Pos(i,1));return/\S/.test(r.string)||(r=t.getTokenAt(e.Pos(i,r.end+1))),"meta"==r.type&&"#include"==r.string.slice(0,8)?r.start+8:void 0}var i=i.line,n=r(i);if(null==n||null!=r(i-1))return null;for(var o=i;;){var a=r(o+1);if(null==a)break;++o}return{from:e.Pos(i,n+1),to:t.clipPos(e.Pos(o))}})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t){return e.line-t.line||e.ch-t.ch}function i(e,t,i,r){this.line=t,this.ch=i,this.cm=e,this.text=e.getLine(t),this.min=r?r.from:e.firstLine(),this.max=r?r.to-1:e.lastLine()}function r(e,t){var i=e.cm.getTokenTypeAt(d(e.line,t));return i&&/\btag\b/.test(i)}function n(e){return e.line>=e.max?void 0:(e.ch=0,e.text=e.cm.getLine(++e.line),!0)}function o(e){return e.line<=e.min?void 0:(e.text=e.cm.getLine(--e.line),e.ch=e.text.length,!0)}function a(e){for(;;){var t=e.text.indexOf(">",e.ch);if(-1==t){if(n(e))continue;return}{if(r(e,t+1)){var i=e.text.lastIndexOf("/",t),o=i>-1&&!/\S/.test(e.text.slice(i+1,t));return e.ch=t+1,o?"selfClose":"regular"}e.ch=t+1}}}function s(e){for(;;){var t=e.ch?e.text.lastIndexOf("<",e.ch-1):-1;if(-1==t){if(o(e))continue;return}if(r(e,t+1)){g.lastIndex=t,e.ch=t;var i=g.exec(e.text);if(i&&i.index==t)return i}else e.ch=t}}function l(e){for(;;){g.lastIndex=e.ch;var t=g.exec(e.text);if(!t){if(n(e))continue;return}{if(r(e,t.index+1))return e.ch=t.index+t[0].length,t;e.ch=t.index+1}}}function c(e){for(;;){var t=e.ch?e.text.lastIndexOf(">",e.ch-1):-1;if(-1==t){if(o(e))continue;return}{if(r(e,t+1)){var i=e.text.lastIndexOf("/",t),n=i>-1&&!/\S/.test(e.text.slice(i+1,t));return e.ch=t+1,n?"selfClose":"regular"}e.ch=t}}}function u(e,t){for(var i=[];;){var r,n=l(e),o=e.line,s=e.ch-(n?n[0].length:0);if(!n||!(r=a(e)))return;if("selfClose"!=r)if(n[1]){for(var c=i.length-1;c>=0;--c)if(i[c]==n[2]){i.length=c;break}if(0>c&&(!t||t==n[2]))return{tag:n[2],from:d(o,s),to:d(e.line,e.ch)}}else i.push(n[2])}}function h(e,t){for(var i=[];;){var r=c(e);if(!r)return;if("selfClose"!=r){var n=e.line,o=e.ch,a=s(e);if(!a)return;if(a[1])i.push(a[2]);else{for(var l=i.length-1;l>=0;--l)if(i[l]==a[2]){i.length=l;break}if(0>l&&(!t||t==a[2]))return{tag:a[2],from:d(e.line,e.ch),to:d(n,o)}}}else s(e)}}var d=e.Pos,f="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",p=f+"-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",g=new RegExp("<(/?)(["+f+"]["+p+"]*)","g");e.registerHelper("fold","xml",function(e,t){for(var r=new i(e,t.line,0);;){var n,o=l(r);if(!o||r.line!=t.line||!(n=a(r)))return;if(!o[1]&&"selfClose"!=n){var t=d(r.line,r.ch),s=u(r,o[2]);return s&&{from:t,to:s.from}}}}),e.findMatchingTag=function(e,r,n){var o=new i(e,r.line,r.ch,n);if(-1!=o.text.indexOf(">")||-1!=o.text.indexOf("<")){var l=a(o),c=l&&d(o.line,o.ch),f=l&&s(o);if(l&&f&&!(t(o,r)>0)){var p={from:d(o.line,o.ch),to:c,tag:f[2]};return"selfClose"==l?{open:p,close:null,at:"open"}:f[1]?{open:h(o,f[2]),close:p,at:"close"}:(o=new i(e,c.line,c.ch,n),{open:p,close:u(o,f[2]),at:"open"})}}},e.findEnclosingTag=function(e,t,r){for(var n=new i(e,t.line,t.ch,r);;){var o=h(n);if(!o)break;var a=new i(e,t.line,t.ch,r),s=u(a,o.tag);if(s)return{open:o,close:s}}},e.scanForClosingTag=function(e,t,r,n){var o=new i(e,t.line,t.ch,n?{from:0,to:n}:null);return u(o,r)}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.registerHelper("fold","markdown",function(t,i){function r(i){var r=t.getTokenTypeAt(e.Pos(i,0));return r&&/\bheader\b/.test(r)}function n(e,t,i){var n=t&&t.match(/^#+/);return n&&r(e)?n[0].length:(n=i&&i.match(/^[=\-]+\s*$/),n&&r(e+1)?"="==i[0]?1:2:o)}var o=100,a=t.getLine(i.line),s=t.getLine(i.line+1),l=n(i.line,a,s);
if(l!==o){for(var c=t.lastLine(),u=i.line,h=t.getLine(u+2);c>u&&!(n(u+1,s,h)<=l);)++u,s=h,h=t.getLine(u+2);return{from:e.Pos(i.line,a.length),to:e.Pos(u,t.getLine(u).length)}}})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.registerGlobalHelper("fold","comment",function(e){return e.blockCommentStart&&e.blockCommentEnd},function(t,i){var r=t.getModeAt(i),n=r.blockCommentStart,o=r.blockCommentEnd;if(n&&o){for(var a,s=i.line,l=t.getLine(s),c=i.ch,u=0;;){var h=0>=c?-1:l.lastIndexOf(n,c-1);if(-1!=h){if(1==u&&h<i.ch)return;if(/comment/.test(t.getTokenTypeAt(e.Pos(s,h+1)))){a=h+n.length;break}c=h-1}else{if(1==u)return;u=1,c=l.length}}var d,f,p=1,g=t.lastLine();e:for(var m=s;g>=m;++m)for(var v=t.getLine(m),y=m==s?a:0;;){var w=v.indexOf(n,y),b=v.indexOf(o,y);if(0>w&&(w=v.length),0>b&&(b=v.length),y=Math.min(w,b),y==v.length)break;if(y==w)++p;else if(!--p){d=m,f=y;break e}++y}if(null!=d&&(s!=d||f!=a))return{from:e.Pos(s,a),to:e.Pos(d,f)}}})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.overlayMode=function(t,i,r){return{startState:function(){return{base:e.startState(t),overlay:e.startState(i),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(r){return{base:e.copyState(t,r.base),overlay:e.copyState(i,r.overlay),basePos:r.basePos,baseCur:null,overlayPos:r.overlayPos,overlayCur:null}},token:function(e,n){return(e!=n.streamSeen||Math.min(n.basePos,n.overlayPos)<e.start)&&(n.streamSeen=e,n.basePos=n.overlayPos=e.start),e.start==n.basePos&&(n.baseCur=t.token(e,n.base),n.basePos=e.pos),e.start==n.overlayPos&&(e.pos=e.start,n.overlayCur=i.token(e,n.overlay),n.overlayPos=e.pos),e.pos=Math.min(n.basePos,n.overlayPos),null==n.overlayCur?n.baseCur:null!=n.baseCur&&n.overlay.combineTokens||r&&null==n.overlay.combineTokens?n.baseCur+" "+n.overlayCur:n.overlayCur},indent:t.indent&&function(e,i){return t.indent(e.base,i)},electricChars:t.electricChars,innerMode:function(e){return{state:e.base,mode:t}},blankLine:function(e){t.blankLine&&t.blankLine(e.base),i.blankLine&&i.blankLine(e.overlay)}}}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e){for(var t=0;t<e.state.activeLines.length;t++)e.removeLineClass(e.state.activeLines[t],"wrap",o),e.removeLineClass(e.state.activeLines[t],"background",a)}function i(e,t){if(e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!=t[i])return!1;return!0}function r(e,r){for(var n=[],s=0;s<r.length;s++){var l=r[s];if(l.empty()){var c=e.getLineHandleVisualStart(l.head.line);n[n.length-1]!=c&&n.push(c)}}i(e.state.activeLines,n)||e.operation(function(){t(e);for(var i=0;i<n.length;i++)e.addLineClass(n[i],"wrap",o),e.addLineClass(n[i],"background",a);e.state.activeLines=n})}function n(e,t){r(e,t.ranges)}var o="CodeMirror-activeline",a="CodeMirror-activeline-background";e.defineOption("styleActiveLine",!1,function(i,o,a){var s=a&&a!=e.Init;o&&!s?(i.state.activeLines=[],r(i,i.listSelections()),i.on("beforeSelectionChange",n)):!o&&s&&(i.off("beforeSelectionChange",n),t(i),delete i.state.activeLines)})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(e,t){var i=e.getRange(c(t.line,t.ch-1),c(t.line,t.ch+1));return 2==i.length?i:null}function i(t,i,r){var n=t.getLine(i.line),o=t.getTokenAt(i);if(/\bstring2?\b/.test(o.type))return!1;var a=new e.StringStream(n.slice(0,i.ch)+r+n.slice(i.ch),4);for(a.pos=a.start=o.start;;){var s=t.getMode().token(a,o.state);if(a.pos>=i.ch+1)return/\bstring2?\b/.test(s);a.start=a.pos}}function r(r,n){for(var o={name:"autoCloseBrackets",Backspace:function(i){if(i.getOption("disableInput"))return e.Pass;for(var n=i.listSelections(),o=0;o<n.length;o++){if(!n[o].empty())return e.Pass;var a=t(i,n[o].head);if(!a||r.indexOf(a)%2!=0)return e.Pass}for(var o=n.length-1;o>=0;o--){var s=n[o].head;i.replaceRange("",c(s.line,s.ch-1),c(s.line,s.ch+1))}}},a="",s=0;s<r.length;s+=2)(function(t,r){a+=r,o["'"+t+"'"]=function(o){if(o.getOption("disableInput"))return e.Pass;for(var s,u,h=o.listSelections(),d=0;d<h.length;d++){var f,p=h[d],g=p.head,u=o.getRange(g,c(g.line,g.ch+1));if(p.empty())if(t==r&&u==r)f=o.getRange(g,c(g.line,g.ch+3))==t+t+t?"skipThree":"skip";else if(t==r&&g.ch>1&&n.indexOf(t)>=0&&o.getRange(c(g.line,g.ch-2),g)==t+t&&(g.ch<=2||o.getRange(c(g.line,g.ch-3),c(g.line,g.ch-2))!=t))f="addFour";else if('"'==t||"'"==t){if(e.isWordChar(u)||!i(o,g,t))return e.Pass;f="both"}else{if(!(o.getLine(g.line).length==g.ch||a.indexOf(u)>=0||l.test(u)))return e.Pass;f="both"}else f="surround";if(s){if(s!=f)return e.Pass}else s=f}o.operation(function(){if("skip"==s)o.execCommand("goCharRight");else if("skipThree"==s)for(var e=0;3>e;e++)o.execCommand("goCharRight");else if("surround"==s){for(var i=o.getSelections(),e=0;e<i.length;e++)i[e]=t+i[e]+r;o.replaceSelections(i,"around")}else"both"==s?(o.replaceSelection(t+r,null),o.execCommand("goCharLeft")):"addFour"==s&&(o.replaceSelection(t+t+t+t,"before"),o.execCommand("goCharRight"))})},t!=r&&(o["'"+r+"'"]=function(t){for(var i=t.listSelections(),n=0;n<i.length;n++){var o=i[n];if(!o.empty()||t.getRange(o.head,c(o.head.line,o.head.ch+1))!=r)return e.Pass}t.execCommand("goCharRight")})})(r.charAt(s),r.charAt(s+1));return o}function n(i){return function(r){if(r.getOption("disableInput"))return e.Pass;for(var n=r.listSelections(),o=0;o<n.length;o++){if(!n[o].empty())return e.Pass;var a=t(r,n[o].head);if(!a||i.indexOf(a)%2!=0)return e.Pass}r.operation(function(){r.replaceSelection("\n\n",null),r.execCommand("goCharLeft"),n=r.listSelections();for(var e=0;e<n.length;e++){var t=n[e].head.line;r.indentLine(t,null,!0),r.indentLine(t+1,null,!0)}})}}var o="()[]{}''\"\"",a="'\"",s="[]{}",l=/\s/,c=e.Pos;e.defineOption("autoCloseBrackets",!1,function(t,i,l){if(l!=e.Init&&l&&t.removeKeyMap("autoCloseBrackets"),i){var c=o,u=a,h=s;"string"==typeof i?c=i:"object"==typeof i&&(null!=i.pairs&&(c=i.pairs),null!=i.triples&&(u=i.triples),null!=i.explode&&(h=i.explode));var d=r(c,u);h&&(d.Enter=n(h)),t.addKeyMap(d)}})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e){var t=e.getWrapperElement();e.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:t.style.width,height:t.style.height},t.style.width="",t.style.height="auto",t.className+=" CodeMirror-fullscreen",document.documentElement.style.overflow="hidden",e.refresh()}function i(e){var t=e.getWrapperElement();t.className=t.className.replace(/\s*CodeMirror-fullscreen\b/,""),document.documentElement.style.overflow="";var i=e.state.fullScreenRestore;t.style.width=i.width,t.style.height=i.height,window.scrollTo(i.scrollLeft,i.scrollTop),e.refresh()}e.defineOption("fullScreen",!1,function(r,n,o){o==e.Init&&(o=!1),!o!=!n&&(n?t(r):i(r))})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e){"object"==typeof e&&(this.minChars=e.minChars,this.style=e.style,this.showToken=e.showToken,this.delay=e.delay,this.wordsOnly=e.wordsOnly),null==this.style&&(this.style=l),null==this.minChars&&(this.minChars=s),null==this.delay&&(this.delay=c),null==this.wordsOnly&&(this.wordsOnly=u),this.overlay=this.timeout=null}function i(e){var t=e.state.matchHighlighter;clearTimeout(t.timeout),t.timeout=setTimeout(function(){r(e)},t.delay)}function r(e){e.operation(function(){var t=e.state.matchHighlighter;if(t.overlay&&(e.removeOverlay(t.overlay),t.overlay=null),!e.somethingSelected()&&t.showToken){for(var i=t.showToken===!0?/[\w$]/:t.showToken,r=e.getCursor(),o=e.getLine(r.line),s=r.ch,l=s;s&&i.test(o.charAt(s-1));)--s;for(;l<o.length&&i.test(o.charAt(l));)++l;return void(l>s&&e.addOverlay(t.overlay=a(o.slice(s,l),i,t.style)))}var c=e.getCursor("from"),u=e.getCursor("to");if(c.line==u.line&&(!t.wordsOnly||n(e,c,u))){var h=e.getRange(c,u).replace(/^\s+|\s+$/g,"");h.length>=t.minChars&&e.addOverlay(t.overlay=a(h,!1,t.style))}})}function n(e,t,i){var r=e.getRange(t,i);if(null!==r.match(/^\w+$/)){if(t.ch>0){var n={line:t.line,ch:t.ch-1},o=e.getRange(n,t);if(null===o.match(/\W/))return!1}if(i.ch<e.getLine(t.line).length){var n={line:i.line,ch:i.ch+1},o=e.getRange(i,n);if(null===o.match(/\W/))return!1}return!0}return!1}function o(e,t){return!(e.start&&t.test(e.string.charAt(e.start-1))||e.pos!=e.string.length&&t.test(e.string.charAt(e.pos)))}function a(e,t,i){return{token:function(r){return!r.match(e)||t&&!o(r,t)?(r.next(),void(r.skipTo(e.charAt(0))||r.skipToEnd())):i}}}var s=2,l="matchhighlight",c=100,u=!1;e.defineOption("highlightSelectionMatches",!1,function(n,o,a){if(a&&a!=e.Init){var s=n.state.matchHighlighter.overlay;s&&n.removeOverlay(s),clearTimeout(n.state.matchHighlighter.timeout),n.state.matchHighlighter=null,n.off("cursorActivity",i)}o&&(n.state.matchHighlighter=new t(o),r(n),n.on("cursorActivity",i))})});